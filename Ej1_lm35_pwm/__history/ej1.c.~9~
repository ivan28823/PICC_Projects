#include <18F4550.h>
#device ADC=10

#FUSES NOWDT                    //No Watch Dog Timer
#FUSES WDT128                   //Watch Dog Timer uses 1:128 Postscale
#FUSES NOBROWNOUT               //No brownout reset
#FUSES NOLVP                    //No low voltage prgming, B3(PIC16) or B5(PIC18) used for I/O
#FUSES NOXINST                  //Extended set extension and Indexed Addressing mode disabled (Legacy mode)

#use delay(crystal=20000000)


#INT_TIMER0
void  TIMER0_isr(void) 
{

}

void main(){
   set_tris_b(0x00);
   setup_adc(ADC_CLOCK_DIV_64 | ADC_TAD_MUL_8 | VSS_VDD );
   setup_adc_ports(AN0);
   set_adc_channel(0);
   
   setup_timer_0(RTCC_INTERNAL|RTCC_DIV_64);      //840 ms overflow
   setup_timer_2(T2_DIV_BY_1,249,1);      //50.0 us overflow, 50.0 us interrupt

   setup_ccp1(CCP_PWM|CCP_SHUTDOWN_AC_L|CCP_SHUTDOWN_BD_L);
   set_pwm1_duty((int16)997);

   enable_interrupts(INT_TIMER0);
   enable_interrupts(GLOBAL);

   long temp;
   while(TRUE){
      temp = read_adc() >>1:
      output_b(temp & 0xFF);
      //TODO: User Code
   }

}
